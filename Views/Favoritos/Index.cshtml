@model List<wishlist>
@{
    var produtos = ViewBag.Produtos as List<Produto>;
}

<h2>Meus Favoritos</h2>

@if (TempData["MensagemSucesso"] != null)
{
    <div class="alert alert-success">@TempData["MensagemSucesso"]</div>
}

@if (TempData["MensagemErro"] != null)
{
    <div class="alert alert-danger">@TempData["MensagemErro"]</div>
}

<div class="favoritos-container">

    @for (int i = 0; i < Model.Count; i++)
    {
        var item = Model[i];
        var prod = produtos[i];
        string imgSrc = prod.Imagens.Length > 0
        ? $"data:image/png;base64,{Convert.ToBase64String(prod.Imagens)}"
        : "/img/sem-imagem.png";

        <div class="card-fav">
            <img src="@imgSrc" />

            <h3>@prod.nomeProduto</h3>
            <p>@prod.Descricao</p>
            <span class="valor">R$ @prod.Valor</span>

            <form method="post" asp-action="ExcluirFavoritoIndex" asp-controller="Favoritos">
                <input type="hidden" name="codProd" value="@prod.codProd" />
                <button type="submit" class="btn-remover">Remover</button>
            </form>
        </div>
    }
</div>
<a asp-action="Index" asp-controller="Home">Voltar</a>

<style>
    .favoritos-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }

    .card-fav {
        background: #fff;
        padding: 15px;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.15);
        text-align: center;
        transition: .2s;
    }

        .card-fav:hover {
            transform: scale(1.03);
        }

        .card-fav img {
            max-width: 100%;
            height: 170px;
            object-fit: contain;
            margin-bottom: 10px;
        }

    .valor {
        display: block;
        margin: 10px 0;
        font-weight: bold;
        color: #007bff;
    }

    .btn-remover {
        background: #e63946;
        color: white;
        border: none;
        padding: 8px 12px;
        border-radius: 8px;
        cursor: pointer;
        transition: .2s;
    }

        .btn-remover:hover {
            background: #c71c2b;
        }
</style>
